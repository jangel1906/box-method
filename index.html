<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Box Method">
  <meta name="theme-color" content="#8B5CF6">
  <title>Box Method</title>
  <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect fill='%238B5CF6' width='100' height='100' rx='20'/><text x='50' y='68' text-anchor='middle' fill='white' font-size='50' font-family='system-ui'>‚ú®</text></svg>">
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      -webkit-tap-highlight-color: transparent;
    }
    @media (display-mode: standalone) { body { padding-top: env(safe-area-inset-top); } }

    .container { max-width: 28rem; margin: 0 auto; padding: 1rem; min-height: 100vh; }

    .header { text-align: center; color: white; padding: 1rem 0; }
    .header h1 { font-size: 1.5rem; font-weight: 700; margin-bottom: 0.25rem; }
    .header p { font-size: 0.875rem; opacity: 0.9; }

    .card { background: white; border-radius: 1rem; box-shadow: 0 4px 20px rgba(0,0,0,0.15); padding: 1.25rem; margin-bottom: 1rem; padding-bottom: 1.5rem; }

    .box-container { position: relative; width: 100%; max-width: 280px; aspect-ratio: 1; margin: 0.5rem auto; padding: 0.75rem; }

    .box {
      position: relative;
      width: 100%;
      height: 100%;
      border: 3px solid #8B5CF6;
      border-radius: 0.5rem;
      transition: all 0.5s ease;
    }
    .box.sealed {
      box-shadow: 0 0 0 4px rgba(139, 92, 246, 0.3);
    }
    .box-circle {
      position: absolute;
      inset: -0.75rem;
      border: 3px solid #F59E0B;
      border-radius: 50%;
      opacity: 0;
      transform: scale(0.8);
      transition: all 0.5s ease;
    }
    .box.sealed .box-circle {
      opacity: 1;
      transform: scale(1);
    }
    .box-star {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) scale(0);
      font-size: 2rem;
      opacity: 0;
      transition: all 0.5s ease 0.3s;
    }
    .box.sealed .box-star {
      transform: translate(-50%, -50%) scale(1);
      opacity: 1;
    }

    .corner-label {
      position: absolute;
      font-size: 0.6rem;
      color: white;
      background: #8B5CF6;
      padding: 0.2rem 0.4rem;
      border-radius: 0.25rem;
      font-weight: 600;
      z-index: 5;
    }
    .label-1 { top: -0.5rem; left: -0.5rem; }
    .label-2 { top: -0.5rem; right: -0.5rem; }
    .label-3 { bottom: -0.5rem; right: -0.5rem; }
    .label-4 { bottom: -0.5rem; left: -0.5rem; }

    .corner-text {
      position: absolute;
      font-size: 0.6rem;
      color: #374151;
      max-width: 42%;
      line-height: 1.3;
      word-wrap: break-word;
      z-index: 4;
      padding: 0.25rem;
    }
    .text-1 { top: 0.5rem; left: 0.5rem; }
    .text-2 { top: 0.5rem; right: 0.5rem; text-align: right; }
    .text-3 { bottom: 0.5rem; right: 0.5rem; text-align: right; }
    .text-4 { bottom: 0.5rem; left: 0.5rem; }

    .step { margin-bottom: 1.25rem; }
    .step-header { display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem; }
    .step-number {
      width: 1.5rem;
      height: 1.5rem;
      background: #8B5CF6;
      color: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.75rem;
      font-weight: 600;
    }
    .step-title { font-weight: 600; color: #1F2937; font-size: 0.9rem; }
    .step-hint { font-size: 0.75rem; color: #9CA3AF; margin-bottom: 0.5rem; }

    .input {
      width: 100%;
      padding: 0.75rem;
      border: 2px solid #E5E7EB;
      border-radius: 0.5rem;
      font-size: 0.875rem;
      transition: border-color 0.2s;
    }
    .input:focus { outline: none; border-color: #8B5CF6; }
    .textarea { resize: none; font-family: inherit; }

    .select {
      width: 100%;
      padding: 0.75rem;
      border: 2px solid #E5E7EB;
      border-radius: 0.5rem;
      font-size: 0.875rem;
      background: white;
      cursor: pointer;
    }
    .select:focus { outline: none; border-color: #8B5CF6; }

    .btn {
      width: 100%;
      padding: 1.25rem;
      border: none;
      border-radius: 0.75rem;
      font-size: 1.1rem;
      font-weight: 600;
      cursor: pointer;
      transition: transform 0.1s, opacity 0.2s;
      min-height: 56px;
    }
    .btn:active { transform: scale(0.98); }
    .btn-primary { background: #8B5CF6; color: white; }
    .btn-primary:disabled { opacity: 0.4; cursor: not-allowed; }
    .btn-secondary { background: #F3F4F6; color: #4B5563; margin-top: 0.75rem; font-size: 0.95rem; }
    .btn-gold { background: linear-gradient(135deg, #F59E0B 0%, #D97706 100%); color: white; }

    .timer-container { text-align: center; padding: 2rem 0; }
    .timer-circle {
      width: 10rem;
      height: 10rem;
      border-radius: 50%;
      background: conic-gradient(#8B5CF6 var(--progress, 0%), #E5E7EB var(--progress, 0%));
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 1rem;
      position: relative;
    }
    .timer-inner {
      width: 8.5rem;
      height: 8.5rem;
      border-radius: 50%;
      background: white;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }
    .timer-seconds { font-size: 3rem; font-weight: 700; color: #1F2937; }
    .timer-label { font-size: 0.875rem; color: #9CA3AF; }
    .timer-instruction { font-size: 0.875rem; color: #6B7280; max-width: 80%; margin: 0 auto; line-height: 1.5; }

    .complete-container { text-align: center; padding: 1rem 0; }
    .complete-icon { font-size: 4rem; margin-bottom: 1rem; }
    .complete-title { font-size: 1.25rem; font-weight: 700; color: #1F2937; margin-bottom: 0.5rem; }
    .complete-text { font-size: 0.875rem; color: #6B7280; margin-bottom: 1.5rem; line-height: 1.5; }

    .feelings-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.5rem; }
    .feeling-btn {
      padding: 0.5rem;
      border: 2px solid #E5E7EB;
      border-radius: 0.5rem;
      background: white;
      font-size: 0.75rem;
      cursor: pointer;
      transition: all 0.2s;
    }
    .feeling-btn.selected { border-color: #8B5CF6; background: #F3E8FF; }
    .feeling-btn:active { transform: scale(0.95); }

    .progress-dots { display: flex; justify-content: center; gap: 0.5rem; margin: 1rem 0; }
    .progress-dot {
      width: 0.5rem;
      height: 0.5rem;
      border-radius: 50%;
      background: #E5E7EB;
      transition: background 0.3s;
    }
    .progress-dot.active { background: #8B5CF6; }
    .progress-dot.completed { background: #10B981; }

    /* Release Animation */
    @keyframes sparkle {
      0%, 100% { opacity: 0; transform: scale(0) rotate(0deg); }
      50% { opacity: 1; transform: scale(1) rotate(180deg); }
    }
    @keyframes float-up {
      0% { opacity: 1; transform: translateY(0) scale(1); }
      100% { opacity: 0; transform: translateY(-100px) scale(0.5); }
    }
    @keyframes pulse-glow {
      0%, 100% { box-shadow: 0 0 20px rgba(245, 158, 11, 0.5); }
      50% { box-shadow: 0 0 40px rgba(245, 158, 11, 0.8), 0 0 60px rgba(139, 92, 246, 0.5); }
    }
    @keyframes expand-circle {
      0% { transform: scale(0); opacity: 0; }
      50% { opacity: 1; }
      100% { transform: scale(3); opacity: 0; }
    }

    .release-container {
      position: relative;
      overflow: hidden;
    }
    .sparkle {
      position: absolute;
      font-size: 1.5rem;
      animation: sparkle 1s ease-in-out forwards;
    }
    .release-glow {
      animation: pulse-glow 1.5s ease-in-out infinite;
      border-radius: 1rem;
    }
    .release-ring {
      position: absolute;
      top: 50%;
      left: 50%;
      width: 50px;
      height: 50px;
      margin: -25px;
      border: 3px solid #F59E0B;
      border-radius: 50%;
      animation: expand-circle 1s ease-out forwards;
    }
    .float-symbol {
      position: absolute;
      font-size: 1.25rem;
      animation: float-up 2s ease-out forwards;
    }

    .summary-card {
      background: linear-gradient(135deg, #F3E8FF 0%, #FEF3C7 100%);
      border-radius: 0.75rem;
      padding: 1rem;
      margin-bottom: 1rem;
    }
    .summary-item {
      margin-bottom: 0.75rem;
      padding-bottom: 0.75rem;
      border-bottom: 1px solid rgba(139, 92, 246, 0.2);
    }
    .summary-item:last-child {
      margin-bottom: 0;
      padding-bottom: 0;
      border-bottom: none;
    }
    .summary-label {
      font-size: 0.7rem;
      color: #7C3AED;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      margin-bottom: 0.25rem;
    }
    .summary-value {
      font-size: 0.875rem;
      color: #1F2937;
      font-weight: 500;
    }

    .release-symbols {
      display: flex;
      justify-content: center;
      gap: 1rem;
      font-size: 2rem;
      margin: 1rem 0;
    }
    .symbol {
      animation: sparkle 0.8s ease-in-out forwards;
    }
    .symbol:nth-child(1) { animation-delay: 0s; }
    .symbol:nth-child(2) { animation-delay: 0.2s; }
    .symbol:nth-child(3) { animation-delay: 0.4s; }
    .symbol:nth-child(4) { animation-delay: 0.6s; }
    .symbol:nth-child(5) { animation-delay: 0.8s; }

    .released-text {
      text-align: center;
      font-size: 1rem;
      color: #7C3AED;
      font-weight: 600;
      margin: 1rem 0;
      opacity: 0;
      animation: fadeIn 0.5s ease-out 1s forwards;
    }
    @keyframes fadeIn {
      to { opacity: 1; }
    }
  </style>
</head>
<body>
  <div id="app"></div>

  <script>
    // App State
    let currentStep = 0; // 0=intro, 1-4=corners, 5=visualize, 6=seal, 7=complete
    let boxData = {
      desire: '',
      endScene: '',
      feeling: '',
      letAllow: 'Focus on gratitude'
    };
    let timerSeconds = 60;
    let timerInterval = null;
    let isSealed = false;

    const feelings = ['Excited', 'Grateful', 'Joyful', 'Relieved', 'Peaceful', 'Abundant', 'Loved', 'Free', 'Confident'];

    function updateField(field, value) {
      boxData[field] = value;
      // Update button state without full re-render
      const nextBtn = document.querySelector('.btn-primary');
      if (nextBtn && nextBtn.textContent.includes('Next')) {
        if (field === 'desire') nextBtn.disabled = !value.trim();
        if (field === 'endScene') nextBtn.disabled = !value.trim();
      }
    }

    function nextStep() {
      if (currentStep === 1 && !boxData.desire.trim()) return;
      if (currentStep === 2 && !boxData.endScene.trim()) return;
      if (currentStep === 3 && !boxData.feeling) return;
      currentStep++;
      render();
    }

    function prevStep() {
      if (currentStep > 0) {
        currentStep--;
        render();
      }
    }

    function selectFeeling(feeling) {
      boxData.feeling = feeling;
      render();
    }

    function startTimer() {
      currentStep = 5;
      timerSeconds = 60;
      render();

      timerInterval = setInterval(() => {
        timerSeconds--;
        if (timerSeconds <= 0) {
          clearInterval(timerInterval);
          currentStep = 6;
        }
        render();
      }, 1000);
    }

    function sealBox() {
      isSealed = true;
      setTimeout(() => {
        currentStep = 7;
        render();
      }, 1500);
      render();
    }

    function startNew() {
      currentStep = 0;
      boxData = { desire: '', endScene: '', feeling: '', letAllow: 'Focus on gratitude' };
      timerSeconds = 60;
      isSealed = false;
      if (timerInterval) clearInterval(timerInterval);
      render();
    }

    function renderBox() {
      return `
        <div class="box-container">
          <div class="box ${isSealed ? 'sealed' : ''}">
            <span class="corner-label label-1">#1</span>
            <span class="corner-label label-2">#2</span>
            <span class="corner-label label-3">#3</span>
            <span class="corner-label label-4">#4</span>

            ${boxData.desire ? `<span class="corner-text text-1">${boxData.desire}</span>` : ''}
            ${boxData.endScene ? `<span class="corner-text text-2">${boxData.endScene}</span>` : ''}
            ${boxData.feeling ? `<span class="corner-text text-3">Feeling: ${boxData.feeling}</span>` : ''}
            ${boxData.letAllow ? `<span class="corner-text text-4">Let + Allow</span>` : ''}

            <div class="box-circle"></div>
            <span class="box-star">‚≠ê</span>
          </div>
        </div>
      `;
    }

    function render() {
      const app = document.getElementById('app');
      let html = '';

      // Intro Screen
      if (currentStep === 0) {
        html = `
          <div class="container">
            <div class="header">
              <h1>‚ú® Box Method</h1>
              <p>Manifest your desires</p>
            </div>
            <div class="card">
              ${renderBox()}
              <p style="text-align: center; color: #6B7280; font-size: 0.875rem; margin-bottom: 1.5rem;">
                Create a visual script to align your energy with your desires through visualization and gratitude.
              </p>
              <button class="btn btn-primary" onclick="nextStep()">Begin Manifestation</button>
            </div>
          </div>
        `;
      }

      // Step 1: Desire
      else if (currentStep === 1) {
        html = `
          <div class="container">
            <div class="header">
              <h1>‚ú® Box Method</h1>
              <p>Step 1 of 4</p>
            </div>
            <div class="card">
              ${renderBox()}
              <div class="progress-dots">
                <div class="progress-dot active"></div>
                <div class="progress-dot"></div>
                <div class="progress-dot"></div>
                <div class="progress-dot"></div>
              </div>
              <div class="step">
                <div class="step-header">
                  <span class="step-number">1</span>
                  <span class="step-title">State Your Desire</span>
                </div>
                <p class="step-hint">Write in present tense, as if it just happened. Be specific and exciting!</p>
                <textarea class="input textarea" rows="3" placeholder="I just now received $10,000 easily!!!" oninput="updateField('desire', this.value)">${boxData.desire}</textarea>
              </div>
              <button class="btn btn-primary" onclick="nextStep()" ${!boxData.desire.trim() ? 'disabled' : ''}>Next</button>
              <button class="btn btn-secondary" onclick="prevStep()">Back</button>
            </div>
          </div>
        `;
      }

      // Step 2: End Scene
      else if (currentStep === 2) {
        html = `
          <div class="container">
            <div class="header">
              <h1>‚ú® Box Method</h1>
              <p>Step 2 of 4</p>
            </div>
            <div class="card">
              ${renderBox()}
              <div class="progress-dots">
                <div class="progress-dot completed"></div>
                <div class="progress-dot active"></div>
                <div class="progress-dot"></div>
                <div class="progress-dot"></div>
              </div>
              <div class="step">
                <div class="step-header">
                  <span class="step-number">2</span>
                  <span class="step-title">End Scene</span>
                </div>
                <p class="step-hint">Describe what you'd see as evidence of your manifestation. A snapshot of success.</p>
                <textarea class="input textarea" rows="3" placeholder="Bank account increased by $10k" oninput="updateField('endScene', this.value)">${boxData.endScene}</textarea>
              </div>
              <button class="btn btn-primary" onclick="nextStep()" ${!boxData.endScene.trim() ? 'disabled' : ''}>Next</button>
              <button class="btn btn-secondary" onclick="prevStep()">Back</button>
            </div>
          </div>
        `;
      }

      // Step 3: Feeling
      else if (currentStep === 3) {
        html = `
          <div class="container">
            <div class="header">
              <h1>‚ú® Box Method</h1>
              <p>Step 3 of 4</p>
            </div>
            <div class="card">
              ${renderBox()}
              <div class="progress-dots">
                <div class="progress-dot completed"></div>
                <div class="progress-dot completed"></div>
                <div class="progress-dot active"></div>
                <div class="progress-dot"></div>
              </div>
              <div class="step">
                <div class="step-header">
                  <span class="step-number">3</span>
                  <span class="step-title">Choose Your Feeling</span>
                </div>
                <p class="step-hint">Select the emotion you'd feel when this manifests.</p>
                <div class="feelings-grid">
                  ${feelings.map(f => `
                    <button class="feeling-btn ${boxData.feeling === f ? 'selected' : ''}" onclick="selectFeeling('${f}')">${f}</button>
                  `).join('')}
                </div>
              </div>
              <button class="btn btn-primary" onclick="nextStep()" ${!boxData.feeling ? 'disabled' : ''}>Next</button>
              <button class="btn btn-secondary" onclick="prevStep()">Back</button>
            </div>
          </div>
        `;
      }

      // Step 4: Let + Allow
      else if (currentStep === 4) {
        html = `
          <div class="container">
            <div class="header">
              <h1>‚ú® Box Method</h1>
              <p>Step 4 of 4</p>
            </div>
            <div class="card">
              ${renderBox()}
              <div class="progress-dots">
                <div class="progress-dot completed"></div>
                <div class="progress-dot completed"></div>
                <div class="progress-dot completed"></div>
                <div class="progress-dot active"></div>
              </div>
              <div class="step">
                <div class="step-header">
                  <span class="step-number">4</span>
                  <span class="step-title">Let + Allow</span>
                </div>
                <p class="step-hint">Release attachment and focus on gratitude. Trust the universe.</p>
                <div style="background: #F3E8FF; border-radius: 0.5rem; padding: 1rem; text-align: center;">
                  <p style="color: #7C3AED; font-weight: 500;">Focus on gratitude</p>
                  <p style="color: #9CA3AF; font-size: 0.75rem; margin-top: 0.25rem;">Surrender control, trust the process</p>
                </div>
              </div>
              <button class="btn btn-primary" onclick="startTimer()">Start 60s Visualization</button>
              <button class="btn btn-secondary" onclick="prevStep()">Back</button>
            </div>
          </div>
        `;
      }

      // Step 5: Visualization Timer
      else if (currentStep === 5) {
        const progress = ((60 - timerSeconds) / 60) * 100;
        html = `
          <div class="container">
            <div class="header">
              <h1>‚ú® Visualize</h1>
              <p>Feel it as if it's real now</p>
            </div>
            <div class="card">
              <div class="timer-container">
                <div class="timer-circle" style="--progress: ${progress}%;">
                  <div class="timer-inner">
                    <span class="timer-seconds">${timerSeconds}</span>
                    <span class="timer-label">seconds</span>
                  </div>
                </div>
                <p class="timer-instruction">
                  Close your eyes. See your <strong>end scene</strong>.
                  Feel the <strong>${boxData.feeling.toLowerCase()}</strong> emotion deeply.
                  It is already yours.
                </p>
              </div>
            </div>
          </div>
        `;
      }

      // Step 6: Seal
      else if (currentStep === 6) {
        html = `
          <div class="container">
            <div class="header">
              <h1>‚ú® Seal & Release</h1>
              <p>Complete your manifestation</p>
            </div>
            <div class="card ${isSealed ? 'release-glow' : ''}" style="position: relative; overflow: hidden;">
              ${isSealed ? `
                <div class="release-ring" style="animation-delay: 0s;"></div>
                <div class="release-ring" style="animation-delay: 0.3s;"></div>
                <div class="release-ring" style="animation-delay: 0.6s;"></div>
                <span class="sparkle" style="top: 10%; left: 20%;">‚ú®</span>
                <span class="sparkle" style="top: 20%; right: 15%; animation-delay: 0.2s;">‚≠ê</span>
                <span class="sparkle" style="top: 60%; left: 10%; animation-delay: 0.4s;">üí´</span>
                <span class="sparkle" style="bottom: 20%; right: 20%; animation-delay: 0.6s;">üåü</span>
                <span class="float-symbol" style="top: 50%; left: 30%;">üïäÔ∏è</span>
                <span class="float-symbol" style="top: 50%; left: 50%; animation-delay: 0.3s;">üíú</span>
                <span class="float-symbol" style="top: 50%; left: 70%; animation-delay: 0.5s;">ü¶ã</span>
              ` : ''}
              ${renderBox()}
              ${!isSealed ? `
                <div class="summary-card">
                  <div class="summary-item">
                    <div class="summary-label">Your Desire</div>
                    <div class="summary-value">${boxData.desire}</div>
                  </div>
                  <div class="summary-item">
                    <div class="summary-label">End Scene</div>
                    <div class="summary-value">${boxData.endScene}</div>
                  </div>
                  <div class="summary-item">
                    <div class="summary-label">Feeling</div>
                    <div class="summary-value">${boxData.feeling}</div>
                  </div>
                  <div class="summary-item">
                    <div class="summary-label">Release</div>
                    <div class="summary-value">Let + Allow with Gratitude</div>
                  </div>
                </div>
                <p style="text-align: center; color: #6B7280; font-size: 0.875rem; margin-bottom: 1rem;">
                  Review your manifestation above, then seal and release it to the universe.
                </p>
                <button class="btn btn-gold" onclick="sealBox()">
                  üïäÔ∏è Seal & Release to Universe
                </button>
              ` : `
                <div class="released-text">Releasing to the Universe...</div>
              `}
            </div>
          </div>
        `;
      }

      // Step 7: Complete
      else if (currentStep === 7) {
        html = `
          <div class="container">
            <div class="header">
              <h1>‚ú® Released</h1>
              <p>Your manifestation is complete</p>
            </div>
            <div class="card">
              <div class="release-symbols">
                <span class="symbol">üåü</span>
                <span class="symbol">üïäÔ∏è</span>
                <span class="symbol">üíú</span>
                <span class="symbol">ü¶ã</span>
                <span class="symbol">‚ú®</span>
              </div>
              ${renderBox()}
              <div class="summary-card">
                <div class="summary-item">
                  <div class="summary-label">You Manifested</div>
                  <div class="summary-value">${boxData.desire}</div>
                </div>
                <div class="summary-item">
                  <div class="summary-label">Evidence You'll See</div>
                  <div class="summary-value">${boxData.endScene}</div>
                </div>
                <div class="summary-item">
                  <div class="summary-label">You Will Feel</div>
                  <div class="summary-value">${boxData.feeling}</div>
                </div>
              </div>
              <div class="complete-container">
                <div class="complete-title">It Is Done ‚úì</div>
                <p class="complete-text">
                  Your manifestation has been sealed with a <strong>circle of protection</strong> and a <strong>star of activation</strong>,
                  then released to the universe like a <strong>dove carrying your intention</strong>.
                  <br><br>
                  Now let go completely. Trust. Focus on gratitude for what you already have.
                </p>
                <button class="btn btn-primary" onclick="startNew()">Create New Manifestation</button>
              </div>
            </div>
          </div>
        `;
      }

      app.innerHTML = html;
    }

    render();
  </script>
</body>
</html>
